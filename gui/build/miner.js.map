{"version":3,"sources":["../app/miner.js"],"names":["grpc","require","grpc_promise","Event","StatusRequest","CommandRequest","Config","SystemStatusRequest","MinerStatusClient","MinerClient","client","credentials","createInsecure","promisifyAll","config_str","request","config","setConfigStr","setConfig","startMiner","sendMessage","stopMiner","systemStatus","reportStatus"],"mappings":";;;;;;;;;;;;;;;;AAAA,IAAMA,OAAOC,QAAQ,MAAR,CAAb;AACA,IAAMC,eAAeD,QAAQ,cAAR,CAArB;;eAGiCA,QAAQ,mBAAR,C;IAAzBE,K,YAAAA,K;IAAOC,a,YAAAA,a;;gBACyCH,QAAQ,kBAAR,C;IAAhDI,c,aAAAA,c;IAAgBC,M,aAAAA,M;IAAQC,mB,aAAAA,mB;;gBACFN,QAAQ,qBAAR,C;IAAtBO,iB,aAAAA,iB;;IAEFC,W;AAEF,2BAAc;AAAA;;AACV,aAAKC,MAAL,GAAc,IAAIF,iBAAJ,CACV,iBADU,EAEVR,KAAKW,WAAL,CAAiBC,cAAjB,EAFU,CAAd;;AAKAV,qBAAaW,YAAb,CAA0B,KAAKH,MAA/B;AACH;;;;qCAEyB;AAAA,gBAAfI,UAAe,uEAAJ,EAAI;;AACtB,gBAAIC,UAAU,IAAIV,cAAJ,EAAd;;AAEA,gBAAIW,SAAS,IAAIV,MAAJ,EAAb;AACAU,mBAAOC,YAAP,CAAoBH,UAApB;AACAC,oBAAQG,SAAR,CAAkBF,MAAlB;;AAEA,mBAAO,KAAKN,MAAL,CAAYS,UAAZ,GAAyBC,WAAzB,CAAqCL,OAArC,CAAP;AACH;;;oCAEW;AACR,gBAAIA,UAAU,IAAIV,cAAJ,EAAd;AACA,mBAAO,KAAKK,MAAL,CAAYW,SAAZ,GAAwBD,WAAxB,CAAoCL,OAApC,CAAP;AACH;;;0CAEiB;AACd,gBAAIA,UAAU,IAAIR,mBAAJ,EAAd;AACA,mBAAO,KAAKG,MAAL,CAAYY,YAAZ,GAA2BF,WAA3B,CAAuCL,OAAvC,CAAP;AACH;;;0CAEiB;AACd,gBAAIA,UAAU,IAAIX,aAAJ,EAAd;AACA,mBAAO,KAAKM,MAAL,CAAYa,YAAZ,GAA2BH,WAA3B,CAAuCL,OAAvC,CAAP;AACH;;;;;kBAIUN,W","file":"miner.js","sourcesContent":["const grpc = require('grpc');\r\nconst grpc_promise = require('grpc-promise');\r\n\r\n\r\nconst { Event, StatusRequest } = require('./rpc/messages_pb');\r\nconst { CommandRequest, Config, SystemStatusRequest } = require('./rpc/command_pb');\r\nconst { MinerStatusClient } = require('./rpc/miner_grpc_pb');\r\n\r\nclass MinerClient {\r\n\r\n    constructor() {\r\n        this.client = new MinerStatusClient(\r\n            '127.0.0.1:50051',\r\n            grpc.credentials.createInsecure()\r\n        );\r\n\r\n        grpc_promise.promisifyAll(this.client);\r\n    }\r\n\r\n    startMiner(config_str=\"\") {\r\n        let request = new CommandRequest();\r\n        \r\n        let config = new Config();\r\n        config.setConfigStr(config_str);\r\n        request.setConfig(config);\r\n\r\n        return this.client.startMiner().sendMessage(request);\r\n    }\r\n\r\n    stopMiner() {\r\n        let request = new CommandRequest();\r\n        return this.client.stopMiner().sendMessage(request);\r\n    }\r\n\r\n    getSystemStatus() {\r\n        let request = new SystemStatusRequest();\r\n        return this.client.systemStatus().sendMessage(request);\r\n    }\r\n\r\n    getMiningStatus() {\r\n        let request = new StatusRequest();\r\n        return this.client.reportStatus().sendMessage(request);\r\n    }\r\n}\r\n\r\n\r\nexport default MinerClient;\r\n"]}